---
layout: post
category: django
tag: [입문, 위코드, TIL]
title: 위스타그램 2 로그인기능 구현
---

## [Mission 4] 로그인 기능 구현

- 로그인을 위한 View를 작성해야합니다. ****로그인 정보(이메일, 비밀번호)
- 로그인을 할 때는 사용자 계정과 비밀번호가 필수입니다.
- 계정이나 패스워드 키가 전달되지 않았을 경우, {"message": "KEY_ERROR"}, status code 400 을 반환합니다.
- 계정을 잘 못 입력한 경우 {"message": "INVALID_USER"}, status code 401을 반환합니다.
- 비밀번호를 잘 못 입력한 경우 {"message": "INVALID_USER"}, status code 401을 반환합니다.
- 로그인이 성공하면 {"message": "SUCCESS"}, status code 200을 반환합니다.

```python
#yooyoung > users > urls.py
from django.urls import path
from .views      import SignUp, SignIn

urlpatterns = [
    path("/signup", SignUp.as_view()),
    path("/signin", SignIn.as_view())
]
```

```python
#yooyoung > users > views.py
class SignIn(View):
    def post(self, request):
        try:
            data = json.loads(request.body)
            email = data['email']
            password = data['password'].encode('utf-8')

            if (data["email"] == "") or (data["password"] == ""):
                return JsonResponse({'message': 'KEY_ERROR'}, status=400)
            
            if User.objects.filter(email=data['email']).exists() == False:
                return JsonResponse({'message': 'INVALID_USER'}, status=401)

            if User.objects.filter(password=data['password']) == False:
                return JsonResponse({'massage': 'INVALID_USER'}, status=401)


            if User.objects.filter(email=data['email']) and User.objects.filter(password=data['password']):
                return JsonResponse({'message': 'SUCCESS'}, status=200)

        except KeyError:
            return JsonResponse({'massage': 'KEY_ERROR'}, status=400)
```

### httpie POST로 로그인하기
```
http -v POST 127.0.0.1:8000/users/signin email='123@gmail.com' password='123'
```

로그인 실패1
![로그인 실패1](/public/img/.png)
로그인 실패2
![로그인 실패1](/public/img/.png)
로그인 실패3
![로그인 실패1](/public/img/.png)
로그인 성공
![로그인 성공](/public/img/.png)